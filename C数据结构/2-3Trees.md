在二叉树中，每个节点有一个数据项，最多有两个子节点。如果允许每个节点可以有更多的数据项和更多的子节点，这就是多叉树。2-3-4树就是多叉树，它的每个节点最多有四个子节点和三个数据项。理解它可以更好地理解B树以及B+树。
B树也是一种多叉树，专门用在外部存储中来组织数据（主存储的外部，指的是磁盘驱动器）。
它的应用场景非常广泛。例如：目前大部分数据库系统及文件系统都采用B树或其变种B+树作为索引结构。B+Tree是数据库系统实现索引的首选数据结构。
————————————————

名字的含义
2-3-4树名字中的2,3,4的含义是指一个节点可能含有的子节点的个数。
对于非叶节点有三种可能的情况：

有一个数据项的节点总是有两个子节点
有两个数据项的节点总是有三个子节点
有三个数据项的节点总是有四个子节点
总之，非叶节点的子节点数总是比它含有的数据项多1.设子节点链接的个数为L，数据项的个数为D，那么：
L=D+1。
叶节点没有子节点，然而它可能含有一个，两个或三个数据项。所以，空节点是不会存在的。
因为2-3-4树最多可以有4个子节点的节点，也可以称之为4叉树。


插入的时候
### 插入

情况一:
  新的数据项总是插在叶节点里，在树的最底层。 
**如果插入到有子节点的节点里，子节点的编号就要发生变化来保持树的结构，这保证了节点的子节点比该节点的数据项多1.**

情况二:
  如果向下寻找要插入位置的路途中，碰到满节点的情况，插入就变得复杂了。发生这种情况时，节点必须分裂。正是这种分裂保证了树的平衡

![[Pasted image 20241007205008.png]]
[2-3树](https://so.csdn.net/so/search?q=2-3%E6%A0%91&spm=1001.2101.3001.7020)（2-3 Tree）是一种自平衡的二叉树，它允许节点拥有一个或两个键值，并且每个内部节点可以有2或3个子节点。这种数据结构保证了树的高度在最坏情况下为O(logn)，使得查找、插入和删除操作的时间复杂度均为)O(logn)。


- 树中每个节点最多有两个键值。
- 每个节点至少有一个键值。
- 对于每个节点，所有左子树的键值都小于该节点的键值。
- 对于每个节点，所有右子树的键值都大于该节点的键值。
- 对于包含两个键值的节点，中间子树的键值介于两个键值之间。


there are three cases；

case1: simply delete
case2:Delete and Merge
case3:Borrow

如果删除了root所指的节点值时，左边key的取值可以是先左节点，然后一直右节点的右值，直到最后一个右节点的右值。 右边的key类比 ，先右后一直左

2-3-4 Tree

B-Tree of degree = 4  度的数量要少于等于4
每个节点必须有两个子节点

所有的叶子节点都在同一高度上
![[Pasted image 20241007213206.png]]

截图  这是加入键值的操作
![[Pasted image 20241007213237.png]]
delete的时候 有两种情况
1.直接删除
2.借值删除

对于 2-3-4树来说有
1.节点分裂 (4-节点变成两个2-节点)

节点分裂的操作步骤：（将要分裂的节点中的数据项设为A、B和C）

- 创建一个新的空节点。它是要分裂节点的兄弟，在要分裂节点的右边
- 数据项C移到新节点中
- 数据项B移动到要分裂节点的父节点中
- 数据项A保留在原来的位置上
- 最右边的两个子节点从要分裂节点处断开，连到新节点上。

![[Pasted image 20241007215431.png]]


2.根的分裂(4-节点变成3个2-节点)

如果一开始查找插入点时就碰到满的根时，插入过程更复杂一些：

- 创建新的根，它是要分裂节点的父节点
- 创建第二个新的节点，它是要分裂节点的兄弟节点
- 数据项C移动到新的兄弟节点中
- 数据项B移动到新的根节点中
- 数据项A保留在原来的位置上
- 要分裂节点最右边的两个子节点断开连接，连到新的兄弟节点中。
![[Pasted image 20241007215631.png]]


在下行路途中分裂
所有满的节点是在下行路途中分裂的，分裂不可能向回波及到树上面的节点。任何要分裂的节点的父节点肯定是不满的，因此该节点不需要分裂就可以插入数据项B。当然，如果父节点的子节点分裂时它已经有两个子节点了，它就变满了。这意味着下次查找碰到它的时候需要分裂
下图是空树中一系列的插入过程，有四个节点分裂了，两个是根，两个是叶节点
![[Pasted image 20241007215910.png]]